<p-dialog
  header="Crear Orden"
  [(visible)]="isVisible"
  [modal]="true"
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  [autoZIndex]="true"
  [baseZIndex]="1000"
  [blockScroll]="true"
  styleClass="create-order-dialog">
  <div class="p-fluid">
    <div class="p-field">
      <label for="amountOfPeople">Cantidad de personas</label>
      <input id="amountOfPeople" type="number" pInputText [(ngModel)]="amountOfPeople" min="1" max="4">
    </div>
    <div class="p-field">
      <label for="userEmail">Email</label>
      <input id="userEmail" type="email" pInputText [(ngModel)]="userEmail" (ngModelChange)="validateEmail()">
      <small *ngIf="!emailValid && userEmail" class="p-error">Ingresá un email válido</small>
    </div>
    <div class="p-field">
      <label for="customerName">Nombre para la reserva</label>
      <input id="customerName" type="text" pInputText [(ngModel)]="customerName" placeholder="Ej: Vicky Heine">
      <small *ngIf="customerName && customerName.trim().length < 2" class="p-error">Nombre demasiado corto</small>
    </div>
    <div class="p-field">
      <label for="reservationDate">Fecha</label>
      <p-calendar
        inputId="reservationDate"
        [(ngModel)]="reservationDate"
        [minDate]="today"
        [maxDate]="maxDate"
        dateFormat="dd/mm/yy"
        [showIcon]="true"
        [appendTo]="'body'">
      </p-calendar>
      <small *ngIf="!reservationDate" class="p-error">Seleccioná una fecha</small>
    </div>
    <div class="p-field">
      <label for="reservationTime">Hora</label>
      <p-dropdown
        inputId="reservationTime"
        [options]="allowedTimeOptions"
        optionLabel="label"
        optionValue="value"
        placeholder="Elegí un horario"
        [(ngModel)]="reservationTime"
        [appendTo]="'body'">
      </p-dropdown>
      <small *ngIf="!reservationTime" class="p-error">Seleccioná un horario válido</small>
    </div>
    <div class="p-field">
      <button
        pButton
        label="Crear orden"
        (click)="createOrder()"
        [disabled]="isLoading || !emailValid || !customerName || !reservationDate || !reservationTime || amountOfPeople < 1 || amountOfPeople > 10">
      </button>
    </div>
  </div>
</p-dialog>

<!-- SPINNER -->
<div *ngIf="isLoading" class="overlay">
  <p-progressSpinner styleClass="custom-spinner" [animationDuration]="'0.5'"></p-progressSpinner>
</div>

<!-- NOTICE EN OVERLAY SEPARADO -->
<div *ngIf="isNoticeVisible" class="overlay">
  <p-dialog
    header="Notificación"
    [(visible)]="isNoticeVisible"
    [modal]="true"
    [closable]="false"
    [baseZIndex]="20000"
    styleClass="notice-dialog">
    <app-notice
      [subtitle]="noticeMessage"
      (onClose)="closeNotice()">
    </app-notice>
  </p-dialog>
</div>