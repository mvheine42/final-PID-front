<div class="container-table-reserved">
  <div class="header">
    <h2 class="table-number">Table: {{ table.id }}</h2>
    <span class="status">{{ table.status }}</span>
  </div>

  <ng-container *ngIf="isLoading; else reservationDetails">
    <div class="body">
      <p-progressSpinner styleClass="custom-spinner" [animationDuration]="'0.5'"></p-progressSpinner>
      <div class="title">Loading reservation...</div>
    </div>
  </ng-container>

  <ng-template #reservationDetails>
    <div class="body" *ngIf="reservation; else notFound">
      <div class="title">
        Reservation for: <strong>{{ reservation.customerName }}</strong>
      </div>
      <div class="details">
        {{ reservation.amountOfPeople }} people at {{ reservation.reservationTime }}
      </div>
      
      <div class="action-buttons full-width">
        <!-- Botones que llaman a confirmCancellation con el modo -->
        <button pButton label="Cancel" 
                (click)="confirmCancellation('CANCEL')" 
                class="p-button-danger"></button>
        
        <button pButton label="No Show" 
                (click)="confirmCancellation('NO_SHOW')" 
                class="p-button-warning"
                [disabled]="!isReservationLate()">
        </button>
        
        <div class="spacer"></div>
        
        <button pButton label="Close" class="close-button" (click)="closeDialog()"></button>
        <button pButton label="Check-in" class="checkin-button" (click)="onCheckIn()"></button>
      </div>
    </div>
    
    <ng-template #notFound>
       <div class="body">
          <div class="title">
            Error: Reservation ID #{{ table.current_reservation_id }} not found for today.
          </div>
          <div class="action-buttons">
            <button pButton label="Close" class="close-button" (click)="closeDialog()"></button>
          </div>
       </div>
    </ng-template>
  </ng-template>
</div>
<!-- ¡SIN DIÁLOGOS AQUÍ! -->